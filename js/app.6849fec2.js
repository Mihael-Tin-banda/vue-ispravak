(function(){"use strict";var e={9435:function(e,t,o){var s=o(5130),r=o(6768);function a(e,t,o,s,a,n){const l=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(l)}var n=o(782),l={name:"App",setup(){const e=(0,n.Pj)(),t=(0,r.EW)((()=>e.state.coins)),o=(0,r.EW)((()=>e.state.user)),s=t=>{e.commit("updateCoins",t)};return{coins:t,user:o,updateUserCoins:s}}},i=o(1241);const c=(0,i.A)(l,[["render",a]]);var d=c,u=o(1387),p=o(4232);const m=e=>((0,r.Qi)("data-v-70df79e5"),e=e(),(0,r.jt)(),e),h=m((()=>(0,r.Lk)("div",null,null,-1))),b={class:"flex md:flex-row flex-col justify-between items-center relative mb-4 mt-2"},v={class:"flex flex-col md:flex-row md:absolute md:left-1/2 md:transform md:-translate-x-1/2"},f=m((()=>(0,r.Lk)("label",{for:"ballCost",class:"border-color border-2 p-2 border-dashed"},"Ulog po loptici:",-1))),g={id:"coinDisplay",class:"border-color border-2 p-2 border-dashed"},k=m((()=>(0,r.Lk)("div",{id:"gameContent",class:"flex justify-center items-center"},null,-1)));function y(e,t,o,a,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)(r.FK,null,[h,(0,r.Lk)("div",b,[(0,r.bF)(i,{to:"/",class:"border-color border-2 p-2 border-dashed ml-2 hover:bg-red-500"},{default:(0,r.k6)((()=>[(0,r.eW)("Go back")])),_:1}),(0,r.Lk)("div",v,[f,(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>a.ballCost=e),id:"ballCost",value:"1",step:"0.1",min:"0.1",class:"focus:outline-0 md:border-t-2 md:border-b-2 md:border-l-0 md:border-r-0 border-l-2 border-r-2 border-dashed text-color bg-color text-center"},null,512),[[s.Jo,a.ballCost,void 0,{number:!0}]]),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.onLaunchClick&&a.onLaunchClick(...e)),onMousedown:t[2]||(t[2]=(...e)=>a.onLaunchMouseDown&&a.onLaunchMouseDown(...e)),onMouseup:t[3]||(t[3]=(...e)=>a.onLaunchMouseUp&&a.onLaunchMouseUp(...e)),onMouseleave:t[4]||(t[4]=(...e)=>a.onLaunchMouseUp&&a.onLaunchMouseUp(...e)),id:"launchBall",class:"border-color border-2 p-2 border-dashed hover:bg-red-500"},"Launch Balls",32)]),(0,r.Lk)("p",g,"Coins: "+(0,p.v_)(a.coins)+" KK",1)]),k],64)}o(4114);var x=o(144),w=o(4501),L=o.n(w),C={name:"PachinkoPage",setup(){const e=(0,n.Pj)(),t=(0,x.KR)(e.state.coins),o=()=>{t.value=parseFloat(parseFloat(t.value).toFixed(2)),e.commit("updateCoins",t.value)},s=(0,x.KR)(1),a=(0,x.KR)(null);let l,i,c,d;const u=[],p=[],m=[],h=()=>{const e=document.getElementById("gameContent");l=L().Engine.create({gravity:{x:0,y:1}}),i=L().Render.create({element:e,engine:l,options:{width:800,height:600,wireframes:!1,background:"#18181d"}}),c=L().Runner.create(),L().Runner.run(c,l);const r={isStatic:!0,restitution:.8,render:{fillStyle:"#fff"}},n=L().Bodies.rectangle(i.canvas.width/2,0,i.canvas.width,5,r),d=L().Bodies.rectangle(i.canvas.width/2,i.canvas.height,i.canvas.width,5,r),h=L().Bodies.rectangle(0,i.canvas.height/2,5,i.canvas.height,r),b=L().Bodies.rectangle(i.canvas.width,i.canvas.height/2,5,i.canvas.height,r);L().World.add(l.world,[n,d,h,b]);const v=[{x:i.canvas.width/2-25,y:95},{x:i.canvas.width/2,y:85},{x:i.canvas.width/2+25,y:95}];a.value=L().Bodies.fromVertices(i.canvas.width/2,50,v,{isStatic:!0,render:{fillStyle:"transparent"}}),L().World.add(l.world,a.value);const f=10,g=42,k=11,y=23,x=a.value.position.y+a.value.bounds.max.y+.2*g;for(let t=0;t<k;t++){const e=(i.canvas.width-y*g)/2+t%2*g/2;for(let o=0;o<y;o++){const s=e+o*g,r=x+t*g,a=L().Bodies.circle(s,r,f,{isStatic:!0,restitution:.4,render:{fillStyle:"transparent",strokeStyle:"#f7fff7",lineWidth:4}});m.push(a),L().World.add(l.world,a)}}const w=m.pop();L().World.remove(l.world,w),L().Events.on(l,"afterUpdate",(()=>{for(let e of m)L().Body.applyForce(e,{x:0,y:0},{x:.05,y:0})}));const C=9,F=i.canvas.width/C,_=20,A=4,B=i.canvas.height-_/2;for(let t=0;t<C;t++){let e;e=t===Math.floor(C/2)?.4:t===Math.floor(C/2)-1||t===Math.floor(C/2)+1?.8:t===Math.floor(C/2)-2||t===Math.floor(C/2)+2?1.4:t===Math.floor(C/2)-3||t===Math.floor(C/2)+3?2.2:15;const o=L().Bodies.rectangle(t*F+F/2,B,F-A,_,{isStatic:!0,label:"section"+(t+1)+" - multiplier: "+e,coins:e,render:{fillStyle:"transparent"}});if(p.push(o),t>0){const e=L().Bodies.rectangle(t*F-A/2,B,A,1.3*_,{isStatic:!0,restitution:1,label:"border",render:{fillStyle:"#f55"}});p.push(e)}if(t<C-1){const e=L().Bodies.rectangle((t+1)*F-A/2,B,A,1.3*_,{isStatic:!0,restitution:1,label:"border",render:{fillStyle:"#f55"}});p.push(e)}}L().World.add(l.world,p),L().Events.on(l,"collisionStart",(e=>{const r=e.pairs;for(const a of r){if(a.bodyA===h&&u.includes(a.bodyB)||a.bodyB===h&&u.includes(a.bodyA)){const e=u.includes(a.bodyB)?a.bodyB:a.bodyA;L().Body.setVelocity(e,{x:2,y:e.velocity.y})}else if(a.bodyA===b&&u.includes(a.bodyB)||a.bodyB===b&&u.includes(a.bodyA)){const e=u.includes(a.bodyB)?a.bodyB:a.bodyA;L().Body.setVelocity(e,{x:-2,y:e.velocity.y})}for(let e=0;e<u.length;e++){const r=u[e];if(a.bodyA===r&&p.includes(a.bodyB)||a.bodyB===r&&p.includes(a.bodyA)){const n=p.includes(a.bodyB)?a.bodyB:a.bodyA;L().World.remove(l.world,r),u.splice(e,1),void 0!==n.coins&&(t.value+=n.coins*s.value,o())}}}})),L().Render.run(i),L().Events.on(i,"afterRender",(function(){i.context.font="1rem Cutive Mono",i.context.fillStyle="white",i.context.textAlign="center",i.context.textBaseline="middle",p.forEach((e=>{void 0!==e.coins&&i.context.fillText(`${e.coins}`,e.position.x,e.position.y)}))})),o()},b=()=>{const e=1;for(let r=0;r<e;r++)if(t.value>s.value){t.value-=s.value,o();const e=100,r=a.value.position.x-e/1.2+Math.random()*e,n=L().Bodies.circle(r,a.value.position.y,10,{restitution:.6,friction:0,render:{fillStyle:"#f55"}});L().World.add(l.world,n),u.push(n),L().Body.applyForce(n,n.position,{x:0,y:-.005})}},v=()=>{const e=s.value;e<0||b(e)},f=()=>{const e=s.value;e<0||(d=setInterval(b,300))},g=()=>{const e=s.value;e<0||clearInterval(d)};return(0,r.sV)((()=>{h()})),{ballCost:s,coins:t,onLaunchClick:v,onLaunchMouseDown:f,onLaunchMouseUp:g}},mounted(){document.body.classList.add("pachinko-page")},beforeUnmount(){document.body.classList.remove("pachinko-page")}};const F=(0,i.A)(C,[["render",y],["__scopeId","data-v-70df79e5"]]);var _=F;const A={class:"flex md:flex-row flex-col justify-between items-center relative mt-2"},B={class:"flex flex-col md:flex-row md:absolute md:left-1/2 md:transform md:-translate-x-1/2"},S={id:"multiply",class:"border-color border-2 p-2 border-dashed"},K={id:"coinDisplay",class:"border-color border-2 p-2 border-dashed"},E={class:"flex justify-center items-center mt-12"},R={id:"minefield",class:"flex flex-wrap",style:{width:"26rem"}},M=["onClick"],I={class:"flex justify-center items-center mt-12"},j={key:0,id:"timer",class:"border-color border-2 p-2 border-dashed"};function G(e,t,o,a,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",A,[(0,r.bF)(i,{to:"/",class:"border-color border-2 p-2 border-dashed ml-2 hover:bg-red-500"},{default:(0,r.k6)((()=>[(0,r.eW)("Go back")])),_:1}),(0,r.Lk)("div",B,[(0,r.Lk)("p",S,"Multiply: "+(0,p.v_)(a.multiply.toFixed(1)),1),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"betInput",min:"0.1",step:"0.1","onUpdate:modelValue":t[0]||(t[0]=e=>a.betValue=e),class:"focus:outline-0 md:border-t-2 md:border-b-2 md:border-l-0 md:border-r-0 border-l-2 border-r-2 border-dashed text-color bg-color text-center"},null,512),[[s.Jo,a.betValue]]),a.gameActive?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("button",{key:0,id:"placeBetButton",class:"border-color border-2 p-2 border-dashed hover:bg-red-500",onClick:t[1]||(t[1]=(...e)=>a.placeBet&&a.placeBet(...e))},"Place Bet")),a.gameActive?((0,r.uX)(),(0,r.CE)("button",{key:1,id:"withdrawButton",class:"border-color border-2 p-2 border-dashed hover:bg-red-500",onClick:t[2]||(t[2]=(...e)=>a.withdraw&&a.withdraw(...e))},"Withdraw")):(0,r.Q3)("",!0)]),(0,r.Lk)("p",K,"Coins: "+(0,p.v_)(a.coins)+" KK",1)]),(0,r.Lk)("div",E,[(0,r.Lk)("div",R,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.mines,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:(0,p.C4)(["h-16 w-16 border-2 border-dashed border-color hover:bg-red-800 m-0.5",{"bg-gray-500":a.selectedSquares[t]}]),onClick:e=>a.clickSquare(t)},null,10,M)))),128))])]),(0,r.Lk)("div",I,[a.gameActive?((0,r.uX)(),(0,r.CE)("p",j,"Time remaining: "+(0,p.v_)(a.timeRemaining)+"s",1)):(0,r.Q3)("",!0)])])}var T=o(6400),P=o(114),X=o(7617);const W={apiKey:"AIzaSyCa_Fi6DH0r0Eg-dytRD2Q-Psv705K-Vgk",authDomain:"steps-da687.firebaseapp.com",projectId:"steps-da687",storageBucket:"steps-da687.appspot.com",messagingSenderId:"815638417742",appId:"1:815638417742:web:bf805c578594e473968e1f",measurementId:"G-3ZBJG2GSW8"},U=(0,T.Wp)(W),O=(0,P.xI)(U),N=(0,X.aU)(U);new P.HF;var D={name:"MinesPage",setup(){const e=(0,n.Pj)(),t=(0,x.KR)(e.state.coins),o=(0,x.KR)(1),s=(0,x.KR)(!1),a=(0,x.KR)(0),l=(0,x.KR)(1),i=(0,x.KR)(.2),c=(0,x.KR)(30),d=(0,x.KR)(Array(36).fill(!1)),u=(0,x.KR)(Array(36).fill(!1));let p=null;const m=async o=>{t.value=parseFloat(o).toFixed(2),e.commit("updateCoins",parseFloat(t.value));const s=O.currentUser;if(s){const e=(0,X.H9)(N,"users",s.uid);await(0,X.BN)(e,{coins:parseFloat(o)},{merge:!0})}};function h(){c.value=30,p=setInterval((()=>{c.value--,c.value<=0&&(clearInterval(p),alert("Time's up!"),s.value=!1)}),1e3)}function b(){clearInterval(p),c.value=30}function v(){o.value>t.value?alert("You don't have enough coins to place this bet."):(a.value=o.value,m(t.value-o.value),s.value=!0)}async function f(){const e=a.value*l.value,o=parseFloat(t.value)+e;await m(o.toFixed(2)),s.value=!1,a.value=0,g()}function g(){u.value=Array(36).fill(!1),d.value=Array(36).fill(!1),l.value=1,i.value=.2,s.value=!1,a.value=0,y()}function k(e){s.value&&!u.value[e]&&(u.value[e]=!0,d.value[e]?(alert("Game Over"),g()):(l.value+=i.value,i.value+=.2))}function y(){l.value=1,i.value=.1;for(let e=0;e<10;e++){let e;do{e=Math.floor(36*Math.random())}while(d.value[e]);d.value[e]=!0}}return(0,r.wB)(s,(e=>{e?h():b()})),(0,r.sV)(y),{betValue:o,gameActive:s,coins:t,multiply:l,timeRemaining:c,mines:d,placeBet:v,withdraw:f,clickSquare:k,selectedSquares:u}}};const V=(0,i.A)(D,[["render",G],["__scopeId","data-v-6f55c3ef"]]);var q=V,H=o.p+"img/pachinko.9cdbd8f8.svg",Q=o.p+"img/bomb.8cdc2475.svg",$=o.p+"img/clover-solid.afdeb77d.svg";const J=e=>((0,r.Qi)("data-v-07b15f0d"),e=e(),(0,r.jt)(),e),Y={class:"w-full h-screen flex flex-col justify-between overflow-auto cutive-mono-regular"},z=J((()=>(0,r.Lk)("h1",{class:"text-5xl relative text-center md:absolute md:left-1/2 md:transform md:-translate-x-1/2"},' "STEPS" ',-1))),Z={class:"flex justify-between items-center relative"},ee={id:"coinDisplay",class:"border-color border-2 p-2 border-dashed ml-2"},te={class:"flex"},oe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-3"},se=J((()=>(0,r.Lk)("span",{class:"absolute inset-0 border-2 border-dashed border-color"},null,-1))),re=J((()=>(0,r.Lk)("div",{class:"relative flex h-full transform items-end border-2 border-color bg-color transition-transform group-hover:-translate-x-2 group-hover:-translate-y-2"},[(0,r.Lk)("div",{class:"p-4 !pt-0 transition-opacity group-hover:absolute group-hover:opacity-0 sm:p-6 lg:p-8"},[(0,r.Lk)("img",{src:H,class:"filter-white svg-size"}),(0,r.Lk)("h2",{class:"mt-4 text-xl sm:text-2xl"},"Pachinko")]),(0,r.Lk)("div",{class:"absolute p-4 opacity-0 transition-opacity group-hover:relative group-hover:opacity-100 sm:p-6 lg:p-8"},[(0,r.Lk)("h3",{class:"mt-4 text-xl sm:text-2xl"},"Pachinko"),(0,r.Lk)("p",{class:"mt-4 text-sm sm:text-base"},"Suck the balls into the hole and win the game."),(0,r.Lk)("p",{class:"mt-8 font-bold border-color border-2 p-2 border-dashed w-fit hover:bg-red-500"},"Press")])],-1))),ae=J((()=>(0,r.Lk)("span",{class:"absolute inset-0 border-2 border-dashed border-color"},null,-1))),ne=J((()=>(0,r.Lk)("div",{class:"relative flex h-full transform items-end border-2 border-color bg-color transition-transform group-hover:-translate-x-2 group-hover:-translate-y-2"},[(0,r.Lk)("div",{class:"p-4 !pt-0 transition-opacity group-hover:absolute group-hover:opacity-0 sm:p-6 lg:p-8"},[(0,r.Lk)("img",{src:Q,class:"filter-white"}),(0,r.Lk)("h2",{class:"mt-4 text-xl sm:text-2xl"},"Mines")]),(0,r.Lk)("div",{class:"absolute p-4 opacity-0 transition-opacity group-hover:relative group-hover:opacity-100 sm:p-6 lg:p-8"},[(0,r.Lk)("h3",{class:"mt-4 text-xl sm:text-2xl"},"Mines"),(0,r.Lk)("p",{class:"mt-4 text-sm sm:text-base"},"Mines are everywhere. You have to find them and avoid them."),(0,r.Lk)("p",{class:"mt-8 font-bold border-color border-2 p-2 border-dashed w-fit hover:bg-red-500"},"Press")])],-1))),le=J((()=>(0,r.Lk)("span",{class:"absolute inset-0 border-2 border-dashed border-color"},null,-1))),ie=J((()=>(0,r.Lk)("div",{class:"relative flex h-full transform items-end border-2 border-color bg-color transition-transform group-hover:-translate-x-2 group-hover:-translate-y-2"},[(0,r.Lk)("div",{class:"p-4 !pt-0 transition-opacity group-hover:absolute group-hover:opacity-0 sm:p-6 lg:p-8"},[(0,r.Lk)("img",{src:$,class:"filter-white svg-size"}),(0,r.Lk)("h2",{class:"mt-4 text-xl sm:text-2xl"},"Lucky Numbers")]),(0,r.Lk)("div",{class:"absolute p-4 opacity-0 transition-opacity group-hover:relative group-hover:opacity-100 sm:p-6 lg:p-8"},[(0,r.Lk)("h3",{class:"mt-4 text-xl sm:text-2xl"},"Lucky Numbers"),(0,r.Lk)("p",{class:"mt-4 text-sm sm:text-base"},"Lucky Numbers are a game of luck"),(0,r.Lk)("p",{class:"mt-8 font-bold border-color border-2 p-2 border-dashed w-fit hover:bg-red-500"},"Press")])],-1))),ce=J((()=>(0,r.Lk)("span",{class:"absolute inset-0 border-2 border-dashed border-color"},null,-1))),de=J((()=>(0,r.Lk)("div",{class:"relative flex h-full transform items-end border-2 border-color bg-color transition-transform group-hover:-translate-x-2 group-hover:-translate-y-2"},[(0,r.Lk)("div",{class:"p-4 !pt-0 transition-opacity group-hover:absolute group-hover:opacity-0 sm:p-6 lg:p-8"},[(0,r.Lk)("img",{src:$,class:"filter-white svg-size"}),(0,r.Lk)("h2",{class:"mt-4 text-xl sm:text-2xl"},"Wordle")]),(0,r.Lk)("div",{class:"absolute p-4 opacity-0 transition-opacity group-hover:relative group-hover:opacity-100 sm:p-6 lg:p-8"},[(0,r.Lk)("h3",{class:"mt-4 text-xl sm:text-2xl"},"Wordle"),(0,r.Lk)("p",{class:"mt-4 text-sm sm:text-base"},"Lucky Numbers are a game of luck"),(0,r.Lk)("p",{class:"mt-8 font-bold border-color border-2 p-2 border-dashed w-fit hover:bg-red-500"},"Press")])],-1)));function ue(e,t,o,s,a,n){const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Y,[z,(0,r.Lk)("div",Z,[(0,r.Lk)("p",ee,"Coins: "+(0,p.v_)(s.coins)+" KK",1),(0,r.Lk)("div",te,[(0,r.Lk)("button",{id:"Authenticate",class:"border-color border-2 p-2 border-dashed hover:bg-red-500 mr-2",onClick:t[0]||(t[0]=(...e)=>n.authenticate&&n.authenticate(...e))}," Authenticate "),(0,r.Lk)("button",{id:"Get_KK",class:"border-color border-2 p-2 border-dashed hover:bg-red-500 mr-2",onClick:t[1]||(t[1]=(...e)=>n.handleRequest&&n.handleRequest(...e))}," Get KorakKoins ")])]),(0,r.Lk)("div",oe,[(0,r.bF)(l,{to:"/pachinko",class:"group relative block h-64 sm:h-80"},{default:(0,r.k6)((()=>[se,re])),_:1}),(0,r.bF)(l,{to:"/mines",class:"group relative block h-64 sm:h-80"},{default:(0,r.k6)((()=>[ae,ne])),_:1}),(0,r.bF)(l,{to:"/lucky",class:"group relative block h-64 sm:h-80"},{default:(0,r.k6)((()=>[le,ie])),_:1}),(0,r.bF)(l,{to:"/wordle",class:"group relative block h-64 sm:h-80"},{default:(0,r.k6)((()=>[ce,de])),_:1})])])}o(4979);var pe=o(4373);async function me(e){const t=Date.now(),o=(new Date).setHours(0,0,0,0);try{const s=await pe.A.post("https://www.googleapis.com/fitness/v1/users/me/dataset:aggregate",{aggregateBy:[{dataTypeName:"com.google.step_count.delta",dataSourceId:"derived:com.google.step_count.delta:com.google.android.gms:estimated_steps"}],bucketByTime:{durationMillis:864e5},startTimeMillis:o,endTimeMillis:t},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(401===s.status)return console.error("Access token is invalid or expired"),null;const r=s.data.bucket.reduce(((e,t)=>{const o=t.dataset[0]?.point[0]?.value[0]?.intVal||0;return e+o}),0);return r}catch(s){return console.error("Failed to fetch the step count data",s),null}}var he={name:"HomePage",setup(){const e=(0,n.Pj)(),t=(0,r.EW)((()=>e.state.coins));return{coins:t}},methods:{base64UrlDecode(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),o=atob(t),s=decodeURIComponent(o.split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(s)},async authenticate(){try{const e=new P.HF;e.addScope("https://www.googleapis.com/auth/fitness.activity.read");const t=await(0,P.df)(O,e),o=t.user;console.log("User authenticated:",o);const s=(0,X.H9)(N,"users",o.uid);await(0,X.BN)(s,{email:o.email},{merge:!0});const r=await o.getIdTokenResult();if(r&&r.token){sessionStorage.setItem("access_token",r.token),sessionStorage.setItem("refresh_token",o.stsTokenManager.refreshToken),console.log("Access token set in session storage:",r.token);const e=r.token.split(".")[1],t=this.base64UrlDecode(e);console.log("Decoded token:",t),t.scope&&t.scope.includes("https://www.googleapis.com/auth/fitness.activity.read")?console.log("Token includes required scope"):console.error("Required scope is missing in the token")}else console.error("Failed to get access token from tokenResult:",r)}catch(e){console.error("Error during authentication",e)}},async getTokenFromFirebaseAuth(){try{const e=O.currentUser;if(e){const t=await e.getIdTokenResult(!0);if(t&&t.token)return console.log("Access token from Firebase Auth:",t.token),t.token}}catch(e){console.error("Error retrieving token from Firebase Auth",e)}return null},async refreshAccessToken(){try{const e=sessionStorage.getItem("refresh_token"),t=await fetch("https://securetoken.googleapis.com/v1/token?key=AIzaSyA-YuDAXpZgtKgjHyfQXir-J1siWselhDU",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:e})}),o=await t.json();if(o.access_token)return console.log("Refreshed access token:",o.access_token),o.access_token;console.error("Failed to refresh access token:",o)}catch(e){return console.error("Failed to refresh access token:",e),null}},async handleRequest(){const e=O.currentUser;if(e){console.log("User is authenticated:",e);try{let t=sessionStorage.getItem("access_token");if(!t){if(console.warn("Access token is missing from session storage, retrieving from Firebase Auth"),t=await this.getTokenFromFirebaseAuth(),!t)return void console.error("Failed to retrieve access token");sessionStorage.setItem("access_token",t),console.log("Access token set in session storage:",t)}const o=await me(t);if(!o)return void console.error("Failed to fetch the step count data");console.log("Current step count:",o);const s=Math.round(o/100*10)/10;console.log("Coins earned:",s);const r=(0,X.H9)(N,"users",e.uid),a=await(0,X.x7)(r);if(a.exists()){let e=a.data().coins||0;e+=s,console.log("Updating coins:",e),await(0,X.BN)(r,{coins:e},{merge:!0}),this.$store.commit("updateCoins",e)}else console.log("Setting initial coins:",s),await(0,X.BN)(r,{coins:s},{merge:!0}),this.$store.commit("updateCoins",s)}catch(t){if(t.response&&401===t.response.status){console.warn("Access token expired, refreshing...");const e=await this.refreshAccessToken();e?(sessionStorage.setItem("access_token",e),this.handleRequest()):console.error("Failed to refresh access token")}else console.error("Failed to fetch the step count data",t)}}else console.log("You need to authenticate first")}},mounted(){O.onAuthStateChanged((async e=>{if(e){const o=(0,X.H9)(N,"users",e.uid);if(navigator.onLine)try{const e=await(0,X.x7)(o);if(e.exists()){const t=e.data();this.$store.commit("updateCoins",t.coins||0)}}catch(t){console.error("Failed to fetch user data from Firestore",t)}else console.error("Client is offline")}}))}};const be=(0,i.A)(he,[["render",ue],["__scopeId","data-v-07b15f0d"]]);var ve=be;const fe={class:"bg-color"},ge={class:"flex md:flex-row flex-col justify-between items-center relative mt-2"},ke={class:"flex flex-col md:flex-row md:absolute md:left-1/2 md:transform md:-translate-x-1/2"},ye={class:"border-color border-2 p-2 border-dashed"},xe={key:0,class:"flex flex-col justify-center items-center my-8"},we={class:"text-center text-color font-black"},Le={class:"text-center text-color font-black"},Ce={class:"text-center text-color font-black"},Fe={key:1,class:"timer"},_e={class:"flex justify-center items-center mt-10"},Ae={id:"grid",class:"flex flex-wrap",style:{width:"26rem"}},Be=["onClick"];function Se(e,t,o,a,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",fe,[(0,r.Lk)("div",ge,[(0,r.bF)(i,{to:"/",class:"border-color border-2 p-2 border-dashed ml-2 hover:bg-red-500"},{default:(0,r.k6)((()=>[(0,r.eW)("Go back")])),_:1}),(0,r.Lk)("div",ke,[(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>a.betAmount=e),min:"0.1",step:"0.1",class:"focus:outline-0 md:border-t-2 md:border-b-2 md:border-r-0 border-l-2 border-r-2 border-dashed text-color bg-color text-center"},null,512),[[s.Jo,a.betAmount]]),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.placeBet&&a.placeBet(...e)),class:"border-color border-2 p-2 border-dashed hover:bg-red-500"},"Place Bet")]),(0,r.Lk)("p",ye,"Coins: "+(0,p.v_)(a.coinDisplay)+" KK",1)]),a.betPlaced?((0,r.uX)(),(0,r.CE)("div",xe,[(0,r.Lk)("p",we,(0,p.v_)(a.randomNumbersText),1),(0,r.Lk)("p",Le,(0,p.v_)(a.correctGuessesText),1),(0,r.Lk)("p",Ce,(0,p.v_)(a.resultText),1)])):(0,r.Q3)("",!0),e.waitingForRestart?((0,r.uX)(),(0,r.CE)("div",Fe," Game restarts in: "+(0,p.v_)(e.timer)+" seconds ",1)):(0,r.Q3)("",!0),(0,r.Lk)("div",_e,[(0,r.Lk)("div",Ae,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.numbers,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:(0,p.C4)(["number h-16 w-16 border-2 border-dashed border-color hover:bg-red-800 m-0.5 flex justify-center items-center font-bold",{"bg-red-500":a.selectedNumbers.includes(e)}]),onClick:t=>a.selectNumber(e)},(0,p.v_)(e),11,Be)))),128))])])])}var Ke={name:"LuckyNumbers",setup(){const e=(0,n.Pj)(),t=(0,x.KR)(1),o=(0,x.KR)([]),s=(0,x.KR)(Array.from({length:36},((e,t)=>t+1))),a=(0,x.KR)([]),l=(0,x.KR)(0),i=(0,x.KR)(0),c=(0,x.KR)(!1),d=(0,x.KR)(0),u=(0,x.KR)(!1),p=(0,r.EW)((()=>{const t=parseFloat(e.state.coins);return isNaN(t)?"0.00":t.toFixed(2)}));function m(e){d.value=e,u.value=!0;const t=setInterval((()=>{d.value--,d.value<=0&&(clearInterval(t),o.value=[],i.value=0,c.value=!1,u.value=!1)}),1e3)}const h=t=>new Promise((o=>{e.commit("updateCoins",t),o(t)}));function b(e){const t=o.value.indexOf(e);t>-1?o.value.splice(t,1):o.value.length<5&&o.value.push(e)}async function v(){if(u.value)return;if(o.value.length<5)return void alert("Please select all 5 numbers before placing a bet.");const s=parseFloat(t.value);if(s<0)return;if(s>e.state.coins)return void alert("You don't have enough coins to place this bet.");const r=await h(e.state.coins-s),a=f(s);await h(r+a),i.value=a,c.value=!0,m(5)}function f(e){let t=[];for(let o=0;o<5;o++){let e;do{e=Math.floor(36*Math.random())+1}while(t.includes(e));t.push(e)}a.value=t;let s=o.value.filter((e=>t.includes(e))).length;l.value=s;let r=[0,1.1,2.4,5,10,50][s];return e*r}return{betAmount:t,selectedNumbers:o,numbers:s,coinDisplay:p,selectNumber:b,placeBet:v,betPlaced:c,randomNumbersText:(0,r.EW)((()=>`Random numbers: ${a.value.join(", ")}`)),correctGuessesText:(0,r.EW)((()=>`You got ${l.value} correct guesses`)),resultText:(0,r.EW)((()=>`You won: ${i.value.toFixed(2)} KK`))}}};const Ee=(0,i.A)(Ke,[["render",Se],["__scopeId","data-v-1b89229f"]]);var Re=Ee;const Me={class:"wordle-game"},Ie=["disabled"],je={class:"selected-letters"},Ge={key:0,class:"game-over"},Te={class:"keyboard"},Pe=["onClick"];function Xe(e,t,o,a,n,l){return(0,r.uX)(),(0,r.CE)("div",Me,[(0,r.bo)((0,r.Lk)("input",{class:"bg-color","onUpdate:modelValue":t[0]||(t[0]=e=>n.currentGuess=e),onKeyup:t[1]||(t[1]=(0,s.jR)(((...e)=>l.submitGuess&&l.submitGuess(...e)),["enter"])),disabled:l.gameOver},null,40,Ie),[[s.Jo,n.currentGuess]]),(0,r.Lk)("div",je,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.selectedLetters,((e,t)=>((0,r.uX)(),(0,r.CE)("span",{key:t,class:"selected-letter"},(0,p.v_)(e),1)))),128))]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.guesses,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"guess"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.chars,((e,t)=>((0,r.uX)(),(0,r.CE)("span",{key:t,class:(0,p.C4)(e.class)},(0,p.v_)(e.char),3)))),128))])))),128)),l.gameOver?((0,r.uX)(),(0,r.CE)("div",Ge,[(0,r.Lk)("p",null,(0,p.v_)(l.gameStatusMessage),1),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.resetGame&&l.resetGame(...e))},"Restart")])):(0,r.Q3)("",!0),(0,r.Lk)("div",Te,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.keyboardLayout,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"keyboard-row"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e,(e=>((0,r.uX)(),(0,r.CE)("button",{key:e,class:(0,p.C4)(l.keyClass(e)),onClick:t=>l.addLetter(e)},(0,p.v_)(e),11,Pe)))),128))])))),128))])])}var We={name:"WordlePage",data(){return{solution:"hello",guesses:[],currentGuess:"",maxGuesses:6,keyboardLayout:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"]],letterFeedback:{},selectedLetters:[]}},computed:{gameOver(){return this.guesses.length>=this.maxGuesses||this.guesses.some((e=>e.isCorrect))},gameStatusMessage(){return this.guesses.some((e=>e.isCorrect))?"Congratulations! You won!":this.guesses.length>=this.maxGuesses?`Game Over! The word was ${this.solution}.`:""}},methods:{submitGuess(){if(this.currentGuess.length!==this.solution.length)return void alert("Guess must be 5 letters.");const e=this.currentGuess.split("").map(((e,t)=>{const o=this.getCharClass(e,t);return this.letterFeedback[e]=o,{char:e,class:o}})),t=this.currentGuess===this.solution;this.guesses.push({chars:e,isCorrect:t}),this.currentGuess="",this.selectedLetters=[]},getCharClass(e,t){return this.solution[t]===e?"correct":this.solution.includes(e)?"present":"absent"},resetGame(){},keyClass(e){return this.letterFeedback[e]},addLetter(e){this.currentGuess.length<this.solution.length&&(this.currentGuess+=e,this.selectedLetters.push(e))}}};const Ue=(0,i.A)(We,[["render",Xe],["__scopeId","data-v-74a29437"]]);var Oe=Ue;const Ne=[{path:"/",name:"home",component:ve},{path:"/pachinko",name:"pachinko",component:_},{path:"/mines",name:"mines",component:q},{path:"/lucky",name:"lucky",component:Re},{path:"/wordle",name:"wordle",component:Oe}],De=(0,u.aE)({history:(0,u.LA)(""),routes:Ne});var Ve=De,qe=(0,n.y$)({state:{coins:10},mutations:{updateCoins(e,t){e.coins=parseFloat(t).toFixed(2)}},actions:{async fetchCoins({commit:e}){const t=O.currentUser;if(t){const o=(0,X.H9)(N,"users",t.uid),s=await(0,X.x7)(o);s.exists()&&e("updateCoins",s.data().coins||0)}}},getters:{getCoins(e){return e.coins}}});(0,s.Ef)(d).use(Ve).use(qe).mount("#app")}},t={};function o(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,s,r,a){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],a=e[d][2];for(var l=!0,i=0;i<s.length;i++)(!1&a||n>=a)&&Object.keys(o.O).every((function(e){return o.O[e](s[i])}))?s.splice(i--,1):(l=!1,a<n&&(n=a));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,r,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p=""}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,a,n=s[0],l=s[1],i=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(i)var d=i(o)}for(t&&t(s);c<n.length;c++)a=n[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},s=self["webpackChunkvue_ispravak"]=self["webpackChunkvue_ispravak"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(9435)}));s=o.O(s)})();
//# sourceMappingURL=app.6849fec2.js.map